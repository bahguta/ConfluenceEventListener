<?xml version="1.0" encoding="UTF-8"?>

<atlassian-plugin key="${atlassian.plugin.key}" name="${project.name}" plugins-version="2"> 
  <plugin-info> 
    <description>${project.description}</description>  
    <version>${project.version}</version>  
    <vendor name="${project.organization.name}" url="${project.organization.url}"/>  
    <param name="plugin-icon">images/pluginIcon.png</param>  
    <param name="plugin-logo">images/pluginLogo.png</param> 
  </plugin-info>  
  <!-- add our i18n resource -->  
  <resource type="i18n" name="i18n" location="eventService"/>  
  <!-- add our web resources -->  
  <web-resource key="eventService-resources" name="eventService Web Resources"> 
    <dependency>com.atlassian.auiplugin:ajs</dependency>  
    <resource type="download" name="eventService.css" location="/css/eventService.css"/>  
    <resource type="download" name="eventService.js" location="/js/eventService.js"/>  
    <resource type="download" name="images/" location="/images"/>

    <context>eventService</context> 
  </web-resource>
  <listener name="Confluence Event Listener" class="com.cis.confluence.plugins.impl.ConfluenceEventServiceImpl" key="eventlistener"> 
    <description>Provides an audit log for each event within Confluence.</description> 
  </listener>
  <xhtml-macro name="Confluencer Macro Page" class="com.cis.confluence.plugins.impl.ConfluencerMacroPage" key="confluencer-macro-page">
    <description key="confluencer.macro.page"/>
    <category name="Administration"/>
    <parameters/> 
  </xhtml-macro>

<!--  <webwork key="confluencer-participate-button" name="Participate Confluencer Button" section="system.profile.edit">-->
<!--    <actions>-->
<!--      <action name="ConfluencerParticipate" alias="ConfluencerParticipate">-->
<!--        <view name="confluencerparticipate">/templates/view.vm</view>-->
<!--      </action>-->
<!--    </actions>-->
<!--  </webwork>-->

<!--  <web-section key="Confluencer-section" name="Confluencer Section" location="system.profile.edit/confluencer" weight="300">-->
<!--    <label key="Confluencer Section" />-->
<!--&lt;!&ndash;    <condition class="com.atlassian.confluence.plugin.descriptor.web.conditions.NotPersonalSpaceCondition"/>&ndash;&gt;-->
<!--  </web-section>-->

<!--  <web-item key="Confluencer" name="Participate Confluencer Page" section="system.profile.edit/confluencer" weight="10">-->
<!--    <description key="confluencer-participate.desc">Participate Confluencer Page</description>-->
<!--    <label key="Confluencer" />-->
<!--    <link linkId="confluencer-participate-page">/secure/confluencer!default.jspa</link>-->
<!--  </web-item>-->

<!--  <web-item key="web-item-example" name="My Web Item" section="system.profile.edit/user-administion" weight="200">-->
<!--    <description key="my-web-item-desc">General description</description>-->
<!--    <label key="my-web-item-label" />-->
<!--    <link linkId="my-web-item-link">/my-web-item</link>-->
<!--  </web-item>-->




<!--  <webwork1 key="confluencer-participate-button" name="Participate Confluencer Button" i18n-name-key="confluencer-participate-button.name">-->
<!--    <description key="confluencer-participate-button.desc">This is a section of Confluencer Panel</description>-->
<!--&lt;!&ndash;    <resource type="download" name="view.css" location="/css/view.css"/>&ndash;&gt;-->

<!--    <actions>-->
<!--      <action class="com.cis.confluence.plugins.impl.ConfluencerParticipate" alias="ConfluencerPanel">-->
<!--        <view name="SUCCESS">/templates/view.vm</view>-->
<!--        <view name="ERROR">/templates/error.vm</view>-->
<!--      </action>-->
<!--    </actions>-->
<!--  </webwork1>-->


<!--  <webwork1 key="scheduler-webwork-list-key" name="Scheduler WebWork List" i18n-name-key="scheduler-webwork-list-key.name">-->
<!--    <description key="scheduler-webwork-list-key.desc">This is a webwork for Scheduler List Panel</description>-->
<!--    &lt;!&ndash;    <resource type="download" name="view.css" location="/css/view.css"/>&ndash;&gt;-->
<!--    <actions>-->
<!--      <action name="com.cis.confluence.plugins.impl.ConfluencerParticipate" alias="SchedulerPanel">-->
<!--        <view name="SUCCESS">/templates/listview.vm</view>-->
<!--        <view name="ERROR">/templates/listerror.vm</view>-->
<!--      </action>-->
<!--    </actions>-->
<!--  </webwork1>-->


    <xwork name="Confluencer" key="add-draft-label-action-xwork">
        <description key="item.confluencer-participate-action-xwork.link.desc">This is a section of Confluencer Panel</description>
        <package name="Confluencer Page" extends="default" namespace="/plugins/confluencer">
            <default-interceptor-ref name="defaultStack"/>
            <action name="confluencer-panel" class="com.cis.confluence.plugins.impl.ConfluencerParticipate" method="execute">
<!--                <view name="SUCCESS">/templates/view.vm</view>-->
<!--                <view name="ERROR">/templates/error.vm</view>-->
                <result name="SUCCESS" type="velocity">/templates/view.vm</result>
                <result name="ERROR" type="velocity">/templates/error.vm</result>
<!--                <result name="success" type="redirect">${page.urlPath}</result>-->
            </action>
        </package>
    </xwork>


  <web-section key="confluencer-profile-section" name="Confluencer section" location="system.profile.edit" i18n-name-key="confluencer-profile-section.name" weight="900">
    <label key="Confluencer Section"></label>
    <description>Confluencer Section</description>
    <tooltip>Section of Confluencer</tooltip>
  </web-section>

  <web-item key="confluencer-menu-item" name="Confluencer Panel"  section="system.profile.edit/confluencer-profile-section" weight="200">
    <description key="confluencer-menu-item.desc">Panel for Confluencers</description>
    <label key="Confluencer Panel" />
<!--    <param name="isPopupLink" value="true" />-->
        <resource type="velocity" name="view" location="templates/view.vm"/>
    <link linkId="confluencer-panel-link">/plugins/confluencer/confluencer-panel.action</link>
    <!--    /users/SchedulerPanel.jspa-->
<!--    <condition class="com.cis.confluence.plugins.impl.CustomWebCondition"/>-->
  </web-item>



<!--  <xhtml-macro name="Custom Profile Page" class="com.cis.confluence.plugins.impl.ConfluencerParticipateipate" key="custom-profile-page">-->
<!--    <description key="custom.profile.page"/>-->
<!--        <resource type="velocity" name="view" location="/templates/profile-macro.vm"/>-->
<!--    <category name="Administration"/>-->
<!--    <parameters/>-->
<!--  </xhtml-macro>-->


<!--  <web-item key="myuserpreferences" name="Custom User Settings"-->
<!--            section="system.editor.featured.macros.default" weight="40">-->
<!--    <label key="myapp.user.settings.tabs.header"/>-->
<!--    <link>/users/viewmycustomettings.action</link>-->
<!--  </web-item>-->
<!--  <xhtml-macro name="Profile Picture Macro" class="com.cis.confluence.plugins.utils.ProfilePictureMacro" key="profile-picture-macro">-->
<!--    <description key="profile.picture.macro"/>-->
<!--    <resource type="velocity" name="view" location="/templates/view.vm"/>-->
<!--    <category name="Administration"/>-->
<!--    <parameters>-->
<!--      <parameter name="user" required="false"/>-->
<!--    </parameters>-->
<!--  </xhtml-macro>-->

</atlassian-plugin>




